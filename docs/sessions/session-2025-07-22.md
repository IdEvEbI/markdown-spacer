---
**文档标题**：feature/spacing-algorithm 分支开发协作经验精粹
**文档版本**：v1.2
**创建时间**：2025-07-22
**维护人员**：刘凡 & 小克
**文档状态**：已完成
---

# feature/spacing-algorithm 分支开发协作经验精粹

## 1. 任务拆解与推进

- 需求、实现、测试、文档“四位一体”同步推进，减少返工。
- 采用 todo-list 细化每个规则、每个特殊场景，完成后及时同步进度。

## 2. 代码与测试驱动

- 先补充/完善测试用例，覆盖所有边界和特殊场景（如表格、列表、标题、引用、代码块、公式、链接、双引号等）。
- 实现核心算法时，优先保证通过所有测试用例，遇到需求变更及时同步测试。
- 采用“保护-格式化-还原”机制，确保代码块、公式、链接等特殊内容不被误处理。
- 对于复杂规则（如双引号加粗），优先选择简单、性能友好的实现，必要时调整需求以兼容实现。

## 3. 文档与规范同步

- 代码实现、测试用例、产品文档、技术设计文档保持同步，避免“文档-代码-测试”三者不一致。
- 对特殊内容保护、边界规则等，及时补充到需求和设计文档。
- 遇到 markdownlint 等格式警告，及时优化文档格式（如 HTML 标签用反引号包裹）。

## 4. 分支与协作流程

- 每个功能点单独 feature 分支开发，合并前确保所有测试通过。
- 合并后严格执行 sync-feature-to-develop 指令，清理本地和远程分支，保持主线干净。
- 所有提交信息、分支命名、文档头部信息均遵循协作规范。

## 5. 自动化与质量保障

- 配置 pre-commit hooks，自动执行 black/flake8/isort/mypy，保证代码风格和类型安全。
- 所有变更先本地测试通过再提交，避免无效 PR。
- 充分利用 pytest 覆盖所有核心和边界场景。

## 6. 结构与命名规范

- 文档、代码、会话记录等均采用统一的目录结构和编号命名，便于检索和维护。
- 产品命名、文档头部格式等变更，需同步更新所有相关内容。

---

> 本文档总结自 2025-07-22 feature/spacing-algorithm 分支开发全过程，由刘凡 & 小克协作整理。
