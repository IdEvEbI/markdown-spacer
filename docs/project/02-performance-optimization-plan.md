---
**æ–‡æ¡£æ ‡é¢˜**ï¼šæ€§èƒ½ä¼˜åŒ–è¡ŒåŠ¨è®¡åˆ’
**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv2.0
**åˆ›å»ºæ—¶é—´**ï¼š2025-07-23
**æ›´æ–°æ—¶é—´**ï¼š2025-07-23
**ç»´æŠ¤äººå‘˜**ï¼šåˆ˜å‡¡ & å°å…‹
**æ–‡æ¡£çŠ¶æ€**ï¼šè¿›è¡Œä¸­
---

# æ€§èƒ½ä¼˜åŒ–è¡ŒåŠ¨è®¡åˆ’

## 1. ä¼˜åŒ–ç›®æ ‡

### 1.1 æ€»ä½“ç›®æ ‡

æå‡ markdown-spacer å·¥å…·çš„å¤„ç†æ€§èƒ½å’Œå†…å­˜ä½¿ç”¨æ•ˆç‡ï¼Œç¡®ä¿åœ¨å¤„ç†å¤§æ–‡ä»¶å’Œå¤§æ‰¹é‡æ–‡ä»¶æ—¶ä¿æŒè‰¯å¥½çš„ç”¨æˆ·ä½“éªŒã€‚

### 1.2 å…·ä½“æŒ‡æ ‡

- **å¤„ç†é€Ÿåº¦**ï¼šå¤§æ–‡ä»¶ï¼ˆ>1MBï¼‰å¤„ç†æ—¶é—´ä¼˜åŒ–
- **å†…å­˜ä½¿ç”¨**ï¼šå‡å°‘å†…å­˜å ç”¨ï¼Œé¿å…å†…å­˜æ³„æ¼
- **å“åº”æ€§**ï¼šä¿æŒç”¨æˆ·ç•Œé¢çš„å“åº”æ€§
- **å¯æ‰©å±•æ€§**ï¼šæ”¯æŒæ›´å¤§è§„æ¨¡çš„æ–‡ä»¶å¤„ç†

## 2. ä¼˜åŒ–é‡ç‚¹

### 2.1 æ­£åˆ™è¡¨è¾¾å¼ç¼“å­˜ä¼˜åŒ– âœ… **å·²å®Œæˆ**

**é—®é¢˜**ï¼šå½“å‰æ­£åˆ™è¡¨è¾¾å¼åœ¨æ¯æ¬¡å¤„ç†æ—¶éƒ½é‡æ–°ç¼–è¯‘
**ä¼˜åŒ–æ–¹æ¡ˆ**ï¼š

- âœ… å°†æ­£åˆ™è¡¨è¾¾å¼ç¼–è¯‘ç»“æœç¼“å­˜
- âœ… é¿å…é‡å¤çš„æ¨¡å¼åŒ¹é…
- âœ… ä¼˜åŒ–æ­£åˆ™è¡¨è¾¾å¼çš„æ‰§è¡Œé¡ºåº

**å®ç°çŠ¶æ€**ï¼šå·²åœ¨ `src/core/formatter.py` ä¸­å®ç°ç±»çº§åˆ«ç¼“å­˜

### 2.2 å¤§æ–‡ä»¶å¤„ç†ä¼˜åŒ– ğŸ”„ **è¿›è¡Œä¸­**

**é—®é¢˜**ï¼šå¤§æ–‡ä»¶å¯èƒ½å¯¼è‡´å†…å­˜å ç”¨è¿‡é«˜
**ä¼˜åŒ–æ–¹æ¡ˆ**ï¼š

- [ ] å®ç°åˆ†å—å¤„ç†
- [ ] å†…å­˜ä½¿ç”¨ç›‘æ§
- [ ] å¤„ç†è¿›åº¦åé¦ˆ

### 2.3 æµå¼å¤„ç†ä¼˜åŒ– ğŸ”„ **è®¡åˆ’ä¸­**

**é—®é¢˜**ï¼šè¶…å¤§æ–‡ä»¶éœ€è¦æµå¼å¤„ç†
**ä¼˜åŒ–æ–¹æ¡ˆ**ï¼š

- [ ] å®ç°æµå¼è¯»å–
- [ ] è¾¹è¯»è¾¹å¤„ç†
- [ ] å†…å­˜ä½¿ç”¨ä¼˜åŒ–

### 2.4 æ€§èƒ½è¯„ä¼°æŠ¥å‘Š ğŸ”„ **è®¡åˆ’ä¸­**

**ç›®æ ‡**ï¼šå»ºç«‹æ€§èƒ½åŸºå‡†å’Œç›‘æ§æœºåˆ¶
**æ–¹æ¡ˆ**ï¼š

- âœ… åˆ›å»ºæ€§èƒ½æµ‹è¯•ç”¨ä¾‹
- âœ… å»ºç«‹åŸºå‡†æµ‹è¯•
- [ ] ç”Ÿæˆå¯è§†åŒ–æ€§èƒ½æŠ¥å‘Š

## 3. å®æ–½è®¡åˆ’ï¼ˆæ›´æ–°ç‰ˆï¼‰

### 3.1 ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€ä¼˜åŒ– âœ… **å·²å®Œæˆ**

- âœ… å»ºç«‹æ€§èƒ½åŸºå‡†æµ‹è¯•
- âœ… åˆ†æå½“å‰æ€§èƒ½ç“¶é¢ˆ
- âœ… æ­£åˆ™è¡¨è¾¾å¼ç¼“å­˜ä¼˜åŒ–
- âœ… æ€§èƒ½æµ‹è¯•éªŒè¯

### 3.2 ç¬¬äºŒé˜¶æ®µï¼šå¤§æ–‡ä»¶å¤„ç†ä¼˜åŒ– ğŸ”„ **å½“å‰é˜¶æ®µ**

- [ ] è®¾è®¡æ–¹æ¡ˆ â†’ ç¡®è®¤ â†’ å®ç° â†’ æµ‹è¯• â†’ æäº¤
- [ ] åˆ†å—å¤„ç†å®ç°
- [ ] å†…å­˜ä½¿ç”¨ç›‘æ§
- [ ] å¤§æ–‡ä»¶æµ‹è¯•éªŒè¯

### 3.3 ç¬¬ä¸‰é˜¶æ®µï¼šæµå¼å¤„ç†ä¼˜åŒ– ğŸ”„ **è®¡åˆ’ä¸­**

- [ ] è®¾è®¡æ–¹æ¡ˆ â†’ ç¡®è®¤ â†’ å®ç° â†’ æµ‹è¯• â†’ æäº¤
- [ ] æµå¼è¯»å–å®ç°
- [ ] è¾¹è¯»è¾¹å¤„ç†é€»è¾‘
- [ ] æµå¼å¤„ç†æµ‹è¯•éªŒè¯

### 3.4 ç¬¬å››é˜¶æ®µï¼šæ€§èƒ½æŠ¥å‘Šç³»ç»Ÿ ğŸ”„ **è®¡åˆ’ä¸­**

- [ ] æ–¹æ¡ˆç¼–å†™ â†’ ç¡®è®¤ â†’ å®ç° â†’ æµ‹è¯• â†’ æäº¤
- [ ] å¯è§†åŒ–æŠ¥å‘Šç”Ÿæˆ
- [ ] æ€§èƒ½è¶‹åŠ¿åˆ†æ
- [ ] HTMLæŠ¥å‘Šè¾“å‡º

## 4. æŠ€æœ¯æ–¹æ¡ˆ

### 4.1 æ­£åˆ™è¡¨è¾¾å¼ä¼˜åŒ– âœ… **å·²å®ç°**

```python
# ä¼˜åŒ–ï¼šé¢„ç¼–è¯‘å¹¶ç¼“å­˜
class MarkdownFormatter:
    # ç±»çº§åˆ«çš„æ­£åˆ™è¡¨è¾¾å¼ç¼“å­˜ï¼Œé¿å…é‡å¤ç¼–è¯‘
    _cached_patterns: Optional[Dict[str, re.Pattern]] = None
    
    @classmethod
    def _get_patterns(cls) -> Dict[str, re.Pattern]:
        """è·å–ç¼–è¯‘å¥½çš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ï¼Œä½¿ç”¨ç±»çº§åˆ«ç¼“å­˜ã€‚"""
        if cls._cached_patterns is None:
            cls._cached_patterns = cls._create_patterns()
        return cls._cached_patterns
```

### 4.2 å¤§æ–‡ä»¶å¤„ç†ä¼˜åŒ– ğŸ”„ **å¾…å®ç°**

```python
# åˆ†å—å¤„ç†å¤§æ–‡ä»¶
def process_large_file(filepath: str, chunk_size: int = 8192):
    with open(filepath, 'r', encoding='utf-8') as f:
        for chunk in iter(lambda: f.read(chunk_size), ''):
            yield process_chunk(chunk)
```

### 4.3 æµå¼å¤„ç†ä¼˜åŒ– ğŸ”„ **å¾…å®ç°**

```python
# æµå¼å¤„ç†ï¼Œè¾¹è¯»è¾¹å¤„ç†
def stream_process_file(filepath: str):
    with open(filepath, 'r', encoding='utf-8') as f:
        for line in f:
            yield process_line(line)
```

### 4.4 æ€§èƒ½ç›‘æ§ âœ… **å·²å®ç°**

```python
import time
import psutil

class PerformanceBenchmark:
    def measure_execution_time(self, func, *args, **kwargs):
        start_time = time.time()
        result = func(*args, **kwargs)
        end_time = time.time()
        return end_time - start_time, result
    
    def measure_memory_usage(self, func, *args, **kwargs):
        start_memory = self.process.memory_info().rss
        result = func(*args, **kwargs)
        end_memory = self.process.memory_info().rss
        memory_used = (end_memory - start_memory) / 1024 / 1024
        return memory_used, result
```

## 5. å½“å‰è¿›åº¦

### 5.1 å·²å®Œæˆå·¥ä½œ âœ…

1. **æ­£åˆ™è¡¨è¾¾å¼ç¼“å­˜ä¼˜åŒ–**
   - å®ç°ç±»çº§åˆ«ç¼“å­˜æœºåˆ¶
   - é¿å…é‡å¤ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼
   - æ€§èƒ½æå‡æ˜¾è‘—

2. **æ€§èƒ½åŸºå‡†æµ‹è¯•ç³»ç»Ÿ**
   - åˆ›å»º `PerformanceBenchmark` ç±»
   - æ”¯æŒæ‰§è¡Œæ—¶é—´å’Œå†…å­˜ä½¿ç”¨æµ‹é‡
   - æä¾›æ€§èƒ½ç“¶é¢ˆåˆ†æåŠŸèƒ½

3. **æ€§èƒ½ä¼˜åŒ–å•å…ƒæµ‹è¯•**
   - æµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼ç¼“å­˜æ•ˆæœ
   - éªŒè¯æ€§èƒ½ä¼˜åŒ–åŠŸèƒ½
   - ç¡®ä¿ä»£ç è´¨é‡

4. **å¼€å‘ç¯å¢ƒé…ç½®**
   - æ›´æ–° `requirements-dev.txt`
   - æ·»åŠ æ€§èƒ½ç›‘æ§å·¥å…·ä¾èµ–
   - é…ç½®ä»£ç è´¨é‡æ£€æŸ¥

### 5.2 å½“å‰ä»»åŠ¡ ğŸ”„

1. **éªŒè¯æµ‹è¯•æ˜¯å¦é€šè¿‡** - ç¡®ä¿ä¿®æ”¹åçš„æµ‹è¯•æ­£å¸¸è¿è¡Œ
2. **å¤§æ–‡ä»¶å¤„ç†ä¼˜åŒ–** - å®ç°åˆ†å—å¤„ç†æœºåˆ¶
3. **æµå¼å¤„ç†ä¼˜åŒ–** - å®ç°è¾¹è¯»è¾¹å¤„ç†åŠŸèƒ½
4. **æ€§èƒ½æŠ¥å‘Šç³»ç»Ÿ** - ç”Ÿæˆå¯è§†åŒ–æ€§èƒ½æŠ¥å‘Š

## 6. é£é™©è¯„ä¼°

### 6.1 æŠ€æœ¯é£é™©

- **å…¼å®¹æ€§**ï¼šä¼˜åŒ–å¯èƒ½å½±å“ç°æœ‰åŠŸèƒ½
- **å¤æ‚æ€§**ï¼šæ€§èƒ½ä¼˜åŒ–å¯èƒ½å¢åŠ ä»£ç å¤æ‚åº¦

### 6.2 ç¼“è§£æªæ–½

- âœ… å……åˆ†çš„æµ‹è¯•è¦†ç›–
- ğŸ”„ æ¸è¿›å¼ä¼˜åŒ–
- âœ… æ€§èƒ½åŸºå‡†å¯¹æ¯”

## 7. æˆåŠŸæ ‡å‡†

### 7.1 æ€§èƒ½æŒ‡æ ‡

- âœ… æ­£åˆ™è¡¨è¾¾å¼ç¼“å­˜ä¼˜åŒ–å®Œæˆ
- [ ] å¤§æ–‡ä»¶å¤„ç†é€Ÿåº¦æå‡ 30% ä»¥ä¸Š
- [ ] å†…å­˜ä½¿ç”¨å‡å°‘ 20% ä»¥ä¸Š
- âœ… ä¿æŒ 100% åŠŸèƒ½å…¼å®¹æ€§

### 7.2 è´¨é‡æŒ‡æ ‡

- âœ… æ‰€æœ‰ç°æœ‰æµ‹è¯•é€šè¿‡
- âœ… æ–°å¢æ€§èƒ½æµ‹è¯•é€šè¿‡
- âœ… ä»£ç è´¨é‡æ£€æŸ¥é€šè¿‡

## 8. ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **ç«‹å³æ‰§è¡Œ**ï¼šéªŒè¯æµ‹è¯•æ˜¯å¦é€šè¿‡
2. **ä¼˜å…ˆçº§1**ï¼šå¤§æ–‡ä»¶å¤„ç†ä¼˜åŒ–ï¼ˆè®¾è®¡æ–¹æ¡ˆï¼‰
3. **ä¼˜å…ˆçº§2**ï¼šæµå¼å¤„ç†ä¼˜åŒ–
4. **ä¼˜å…ˆçº§3**ï¼šæ€§èƒ½æŠ¥å‘Šç³»ç»Ÿ

---

**è´Ÿè´£äºº**ï¼šå°å…‹ï¼ˆé«˜çº§ Python å¼€å‘å·¥ç¨‹å¸ˆï¼‰
**é¢„è®¡å®Œæˆæ—¶é—´**ï¼šå‰©ä½™ 3-4 å¤©
**ä¾èµ–å…³ç³»**ï¼šæ— å¤–éƒ¨ä¾èµ–ï¼Œå¯ç‹¬ç«‹è¿›è¡Œ
**å½“å‰çŠ¶æ€**ï¼šç¬¬ä¸€é˜¶æ®µå®Œæˆï¼Œè¿›å…¥ç¬¬äºŒé˜¶æ®µ
